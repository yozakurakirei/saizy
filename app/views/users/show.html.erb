<% provide(:title, @user.name+"さんのマイページ")%>
<div class="user-show">
  <!-- profile -->
  <div class="profile">
    <div class="profile-img">
      <% if @user.avatar.attached? %>
        <%= image_tag @user.avatar.variant(resize: "300x300"), width:150 %>
      <% else %>
      <div class="default-img">
        <i class="fas fa-user default-user"></i>
      </div>
      <% end %>
    </div>
    <div class="profile-name">
      <h3 class="user-name"><%= @user.name %></h3>
    </div>
    <div class="profile-follow">
      <%= render 'layouts/follow/stats' %>
    </div>
    <div class="profile-follow-btn">
      <%= render 'follow_form' if logged_in? %>
    </div>
    <% if @user.id == current_user.id %>
      <div class="user-email">
        <i class="far fa-envelope mail-icon"></i>
        <%= @user.email %>
      </div>
      <div class="edit-btn">
        <%= link_to 'プロフィールを編集する', edit_user_path(current_user) %>  
      </div>
    <% else %>
    <% end %>
  </div>
  
  <!-- post -->
  <div class="user-post">
    <div class="user-post-title">
      <h1>マイページ</h1>
    </div>

    <ul class="tab">
      <li>公開中</li>
      <li>出店終了</li>
      <li>下書き</li>
    </ul>

      <ul>
        <h2>公開中</h2>
        <p>投稿数: <%= @user.saizies.published.count %></p>
        <% @user.saizies.published.each do |saizy| %>
          <%= link_to saizy_path(saizy) do%>
          <%= image_tag saizy.images.first.variant(resize: "200x200").processed %>
          <h3 class="side-content-title"><%= saizy.title %></h3>
          <p><%= saizy.start.strftime("%m月%d日") %>〜<%= saizy.finish.strftime("%m月%d日") %></p>
          <p><%= saizy.content.truncate(20) %></p>
          <p><%= saizy.updated_at.strftime("%Y年%m月%d日") %>に更新</p>
          <% end %>
        <% end %>
      </ul>


      <ul>
        <h2>出店終了の投稿</h2>
        <p>投稿数: <%= @user.saizies.deleted.count %></p>
        <% @user.saizies.deleted.each do |saizy| %>
        <div class="side-card">
          <div class="side-card-flex">
            <div class="side-image">
              <%= link_to saizy_path(saizy) do%>
                <%= image_tag saizy.images.first.variant(resize: "200x200").processed %>
            </div>
            <div class="side-content">
              <h3 class="side-content-title"><%= saizy.title %></h3>
              <p><%= saizy.start.strftime("%m月%d日") %>〜<%= saizy.finish.strftime("%m月%d日") %></p>
              <p><%= saizy.content.truncate(20) %></p>
              <p><%= saizy.updated_at.strftime("%Y年%m月%d日") %>に更新</p>
            </div>
          </div>
          <% end %>
        <% end %>
      </ul>

      <ul>
        <h2>下書きの投稿</h2>
      </ul>


  </div>
</div>